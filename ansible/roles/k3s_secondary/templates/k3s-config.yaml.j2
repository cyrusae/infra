# /etc/rancher/k3s/config.yaml
# Generated by Ansible -- do not edit by hand.
# See KB - TLS and Certificates for syntax rules.

server: "https://{{ k3s_primary_ip }}:6443"
node-ip: "{{ node_ip }}"
token: "{{ k3s_token }}"

tls-san:
  - "{{ node_ip }}"
  - "{{ tailscale_hostname }}"

# Disable built-in Traefik -- Terraform manages it instead (terraform/traefik/).
# Must be present before K3s first starts. Two Traefik instances competing for
# ports 80/443 was a direct contributor to the pre-rebuild phantom port failure.
# See ARCHIVE - Ghost Hunt and Rebuild Decision.
disable:
  - traefik
